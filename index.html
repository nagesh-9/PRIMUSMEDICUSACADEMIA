<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRIMUS MEDICUS ACADEMIA</title>

    <!-- Tailwind CSS CDN for modern styling -->
    <link rel="stylesheet" href="output.css">

    <!-- Google Fonts - Roboto for clean typography -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        /* General Body Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
        }

        .font-roboto {
            font-family: 'Roboto', sans-serif;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 0;
        }

        /* Animations for the hero section blobs */
        @keyframes blob {
            0% {
                transform: translate(0px, 0px) scale(1);
            }
            33% {
                transform: translate(30px, -50px) scale(1.1);
            }
            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
            100% {
                transform: translate(0px, 0px) scale(1);
            }
        }

        /* Apply animations */
        .animate-blob {
            animation: blob 7s infinite;
        }

        /* Animation delays for staggered effects */
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        .animation-delay-4000 {
            animation-delay: 4s;
        }

        /* Utility for hiding elements */
        .hidden {
            display: none !important;
        }

        /* Ensure images fit within their containers */
        img {
            max-width: 100%;
            height: auto;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .hero h2 {
                font-size: 3.5rem; /* Adjust font size for smaller screens */
            }
            .hero p {
                font-size: 1.1rem;
            }
            .course-grid {
                grid-template-columns: 1fr; /* Stack courses on small screens */
            }
            .verification-form input, .verification-form button {
                width: 100%;
                margin-right: 0;
                margin-bottom: 1rem;
            }
        }

        /* Styles for the Course Details Modal */
        .course-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .course-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .course-modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-lg */
            max-width: 800px;
            width: 90%;
            max-height: 90vh; /* Limit height for scrollability */
            overflow-y: auto; /* Enable scrolling for long content */
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .course-modal-overlay.show .course-modal-content {
            transform: translateY(0);
        }
    </style>

    <!-- Firebase CDN Imports for Firestore -->
    <script type="module">
        // Import Firebase services from CDN
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

        // Firebase Configuration - Directly integrated using your provided details
        const firebaseConfig = {
            apiKey: "AIzaSyASZPSgcxTH9ziqWsn5sLIcjthZ3QkPzgY",
            authDomain: "primus-medicus-academia.firebaseapp.com",
            projectId: "primus-medicus-academia",
            storageBucket: "primus-medicus-academia.firebasestorage.app",
            messagingSenderId: "408569653938",
            appId: "1:408569653938:web:e5148418ab913aa57bf7ab",
            measurementId: "G-ZW58XDQ261"
        };

        // Global Firebase instances
        let app;
        let db;

        // Ensure the DOM is fully loaded before initializing Firebase and page logic
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Initialize Firebase
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                console.log("Firebase app and Firestore initialized.");

                // Hide loading overlay once Firebase is initialized
                document.getElementById('loading-overlay').classList.add('hidden');

                // Call the main page logic function, passing doc and getDoc functions
                if (typeof window.initPageLogic === 'function') {
                    window.initPageLogic(db, doc, getDoc);
                }
            } catch (error) {
                console.error("Failed to initialize Firebase:", error);
                document.getElementById('loading-overlay').classList.add('hidden');
                // Pass null for db if initialization failed
                if (typeof window.initPageLogic === 'function') {
                    window.initPageLogic(null, null, null); // Pass null for doc and getDoc as well
                }
            }
        }); 
    </script>
</head>
<body class="font-roboto antialiased text-gray-800">

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-gray-100 flex items-center justify-center z-[9999]">
        <div class="flex flex-col items-center p-6 bg-white rounded-lg shadow-lg">
            <!-- Loader Icon (SVG) -->
            <svg class="animate-spin h-10 w-10 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-4 text-lg font-semibold text-gray-700">Loading website...</p>
            <p class="text-sm text-gray-500">Establishing secure connection</p>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-blue-800 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <div class="flex items-center space-x-3 mb-4 md:mb-0">
                <!-- Placeholder for Logo / Icon -->
                <div class="h-12 w-12 bg-white rounded-full flex items-center justify-center">
                   <img src="logo.png">
                </div>
                <h1 class="text-3xl font-bold">PRIMUS MEDICUS ACADEMIA</h1>
            </div>
            <nav>
                <ul class="flex flex-wrap justify-center md:space-x-8 space-x-4">
                    <li>
                        <button data-section="home" class="scroll-button hover:text-blue-200 transition-colors duration-300 font-semibold">Home</button>
                    </li>
                    <li>
                        <button data-section="about" class="scroll-button hover:text-blue-200 transition-colors duration-300 font-semibold">About Us</button>
                    </li>
                    <li>
                        <button data-section="courses" class="scroll-button hover:text-blue-200 transition-colors duration-300 font-semibold">Courses</button>
                    </li>
                    <li>
                        <button data-section="verify" class="scroll-button hover:text-blue-200 transition-colors duration-300 font-semibold">Check Certificate</button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section id="home" class="relative bg-gradient-to-r from-blue-700 to-blue-900 text-white py-24 text-center overflow-hidden rounded-b-lg">
            <!-- Background Overlay -->
            <div class="absolute inset-0 bg-black opacity-40"></div>
            <!-- Abstract Shapes -->
            <div class="absolute inset-0 z-0 opacity-20">
                <div class="absolute -top-10 -left-10 w-48 h-48 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl animate-blob"></div>
                <div class="absolute -bottom-10 -right-10 w-64 h-64 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"></div>
                <div class="absolute top-1/4 left-1/4 w-32 h-32 bg-blue-600 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000"></div>
            </div>
            <div class="relative z-10 container mx-auto px-6">
                <h2 class="text-5xl md:text-6xl font-extrabold mb-6 drop-shadow-lg leading-tight">
                    Unlock Your Potential in Healthcare
                </h2>
                <p class="text-xl md:text-2xl mb-10 max-w-3xl mx-auto opacity-90">
                    PRIMUS MEDICUS ACADEMIA: Empowering Futures, Recognized under Ministry of MSME, Govt. of India.
                </p>
                <button data-section="courses" class="scroll-button bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">
                    Explore Our Courses
                </button>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-20 px-6 bg-white">
            <div class="container mx-auto">
                <h2 class="text-4xl font-bold text-center mb-12 text-blue-800">About PRIMUS MEDICUS ACADEMIA</h2>
                <div class="flex flex-col lg:flex-row items-center lg:space-x-12">
                    <div class="lg:w-1/2 mb-8 lg:mb-0">
                        <img
                            src="logo.png"
                            alt="About Us"
                            class="rounded-lg shadow-xl w-full h-auto"
                        />
                    </div>
                    <div class="lg:w-1/2 text-lg leading-relaxed">
                        <p class="mb-6">
                            PRIMUS MEDICUS ACADEMIA is a premier institution dedicated to fostering excellence in healthcare education and training. We are officially recognized under the <strong>Ministry of Micro, Small & Medium Enterprises (MSME), Govt. of India</strong>, a testament to our commitment to quality, national standards, and the growth of skilled professionals.
                        </p>
                        <p class="mb-6">
                            Our mission is to equip individuals with practical, life-saving, and career-advancing skills across various healthcare domains. Through a blend of online and offline training modalities, we ensure accessibility and flexibility for our diverse student base.
                        </p>
                        <p>
                            We believe in a holistic approach to education, focusing not just on technical proficiency but also on empathy, ethical considerations, and real-world applicability, preparing our graduates to make a tangible difference in the healthcare sector.
                        </p>
                        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="flex items-start">
                                <!-- Book Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5zM20 2H6.5a2.5 2.5 0 0 0 0 5H20"/>
                                </svg>
                                <div>
                                    <h3 class="text-xl font-semibold text-blue-700">Comprehensive Curriculum</h3>
                                    <p class="text-gray-600 text-base">Expertly designed modules for deep learning.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <!-- Award Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <path d="M12 17.75l-6.173 3.535 1.177-7.01L.222 9.07l6.702-.977L12 2l2.076 6.093 6.702.977-4.782 4.205 1.177 7.01z"/>
                                ></svg>
                                <div>
                                    <h3 class="text-xl font-semibold text-blue-700">Government Recognized</h3>
                                    <p class="text-gray-600 text-base">Credibility backed by MSME, Govt. of India.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Courses Section -->
        <section id="courses" class="py-20 px-6 bg-gray-50">
            <div class="container mx-auto">
                <h2 class="text-4xl font-bold text-center mb-12 text-blue-800">Our Certificate Courses</h2>

                <!-- Combined Courses List -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Course 1 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="basic-first-aid">Basic First Aid Training</h4>
                        <p class="text-gray-700 leading-relaxed">Learn the fundamental principles of emergency care, including CPR (Adult & Child), choking management, bleeding & wound control, and emergency contact protocols. Develop essential skills to respond effectively in critical situations.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="basic-first-aid">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 2 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="advanced-first-aid">Advanced First Aid</h4>
                        <p class="text-gray-700 leading-relaxed">Delve deeper into advanced emergency procedures such as scene safety, triage basics, multi-casualty management, and handling specific injuries like burns, poisoning, and head, neck & spinal injuries.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="advanced-first-aid">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 3 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="patient-care-attendant">Patient Care Attendant Training</h4>
                        <p class="text-gray-700 leading-relaxed">Acquire the skills necessary for compassionate patient care, including basic anatomy & physiology, hygiene, bathing & dressing assistance, monitoring vital signs, and ethical considerations in patient support.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="patient-care-attendant">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 4 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="mental-health-first-aid">Mental Health First Aid</h4>
                        <p class="text-gray-700 leading-relaxed">Understand common mental health disorders, recognize early signs of mental distress, and learn how to provide initial help and support to individuals experiencing mental health challenges and crisis scenarios.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="mental-health-first-aid">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 5 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="medical-coding-billing">Medical Coding and Billing (ICD-10, CPT)</h4>
                        <p class="text-gray-700 leading-relaxed">Learn the essentials of healthcare documentation, ICD-10-CM and CPT coding guidelines, insurance billing & claims processes, EMR systems, and HIPAA & legal compliance through practice sessions and case studies.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="medical-coding-billing">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 6 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="hygiene-sanitation">Hygiene & Sanitation Awareness</h4>
                        <p class="text-gray-700 leading-relaxed">Focus on the importance of hygiene in health, proper handwashing techniques, safe drinking water practices, personal hygiene basics, and environmental sanitation to prevent the spread of common diseases.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="hygiene-sanitation">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 7 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="nutrition-diet">Nutrition & Diet Planning Basics</h4>
                        <p class="text-gray-700 leading-relaxed">Gain foundational knowledge in nutrition science, macronutrients and micronutrients, reading food labels, daily calorie requirements, and creating balanced diet plans across life stages.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="nutrition-diet">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 8 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="disaster-emergency">Disaster & Emergency Response Training</h4>
                        <p class="text-gray-700 leading-relaxed">Prepare for various disasters, understand evacuation planning, triage & mass casualty response, communication in crisis, emergency kit preparation, and essential rescue & recovery techniques.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="disaster-emergency">
                            View Course Details
                        </button>
                    </div>
                    <!-- Course 9 -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl border border-gray-200">
                        <h4 class="text-2xl font-bold text-blue-800 mb-4" data-course-id="dental-assistant">Dental Assistant Basic Training</h4>
                        <p class="text-gray-700 leading-relaxed">Get an introduction to dental terminology & equipment, chairside assisting techniques, patient preparation & education, sterilization & infection control, dental charting, and scheduling in a dental office setting.</p>
                        <button class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md view-course-button" data-course-id="dental-assistant">
                            View Course Details
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Certificate Verification Section -->
        <section id="verify" class="py-20 px-6 bg-white">
            <div class="container mx-auto text-center">
                <h2 class="text-4xl font-bold mb-12 text-blue-800">Verify Your Certificate</h2>
                <p class="text-lg text-gray-700 mb-8 max-w-2xl mx-auto">
                    Enter your unique certificate ID below to instantly verify your details.
                </p>
                <div class="bg-gray-100 p-8 rounded-xl shadow-lg max-w-lg mx-auto">
                    <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                        <input
                            type="text"
                            id="certificateId"
                            placeholder="e.g., PMA2024001"
                            class="w-full sm:w-2/3 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"
                            aria-label="Certificate ID"
                        />
                        <button
                            id="verifyBtn"
                            class="w-full sm:w-1/3 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md flex items-center justify-center space-x-2"
                        >
                            <!-- Search Icon (SVG) -->
                            <svg id="verifyIcon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            <span id="verifyBtnText">Check Certificate</span>
                            <!-- Loading Spinner (SVG) -->
                            <svg id="loadingSpinner" class="h-5 w-5 animate-spin text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="verificationResult" class="mt-8 p-6 rounded-lg border border-dashed border-gray-300 min-h-[100px] flex items-center justify-center text-left text-gray-700 bg-white">
                        <p class="text-gray-500">Enter a certificate ID to see results.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Course Details Modal Overlay -->
    <div id="courseDetailsOverlay" class="course-modal-overlay">
        <div class="course-modal-content">
            <button id="closeCourseModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h3 id="modalCourseTitle" class="text-3xl font-bold text-blue-800 mb-4"></h3>
            <p id="modalCourseDescription" class="text-gray-700 leading-relaxed mb-6"></p>
            <h4 class="text-2xl font-bold text-blue-700 mb-4">Course Modules:</h4>
            <ul id="modalCourseModules" class="list-disc list-inside text-gray-700 space-y-2">
                <!-- Modules will be dynamically inserted here -->
            </ul>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-blue-900 text-white py-8 text-center rounded-t-lg">
        <div class="container mx-auto px-6">
            <p class="text-sm">
                &copy; <span id="currentYear"></span> PRIMUS MEDICUS ACADEMIA. All rights reserved.
            </p>
            <p class="text-xs mt-2 opacity-80">
                Recognized under Ministry of MSME, Govt. of India.
            </p>
        </div>
    </footer>

    <!-- Main JavaScript Logic -->
    <script>
        // This function will be called by the Firebase initialization script in the head
        window.initPageLogic = async (dbInstance, docFunc, getDocFunc) => {
            const db = dbInstance;
            const doc = docFunc;
            const getDoc = getDocFunc;

            // References to DOM elements for Verification
            const verifyBtn = document.getElementById('verifyBtn');
            const certificateIdInput = document.getElementById('certificateId');
            const verificationResultDiv = document.getElementById('verificationResult');
            const verifyBtnText = document.getElementById('verifyBtnText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const verifyIcon = document.getElementById('verifyIcon'); // Search icon

            // References to DOM elements for Course Details Modal
            const courseDetailsOverlay = document.getElementById('courseDetailsOverlay');
            const closeCourseModalBtn = document.getElementById('closeCourseModalBtn');
            const modalCourseTitle = document.getElementById('modalCourseTitle');
            const modalCourseDescription = document.getElementById('modalCourseDescription');
            const modalCourseModules = document.getElementById('modalCourseModules');

            // Dummy Course Data (replace with actual data fetching from Firestore if available)
            const coursesData = {
                'basic-first-aid': {
                    title: 'Basic First Aid Training',
                    description: 'This course covers fundamental principles of emergency care, equipping you with essential skills to respond effectively in critical situations. You will learn life-saving techniques applicable in various scenarios.',
                    modules: [
                        'Introduction to First Aid',
                        'Assessing the Scene & Patient Safety',
                        'Choking Management (Adult, Child, Infant)',
                        'Bleeding Control & Wound Care',
                        'Shock Management',
                        'Burns and Scalds',
                        'Fractures, Sprains, and Strains',
                        'Allergic Reactions & Anaphylaxis',
                        'Recognizing Medical Emergencies (Heart Attack, Stroke, Seizures)',
                        'Emergency Contact Protocols & Calling for Help'
                    ]
                },
                'advanced-first-aid': {
                    title: 'Advanced First Aid',
                    description: 'Building upon basic first aid, this course delves into more complex emergency procedures. It is designed for individuals seeking a deeper understanding and practical skills for advanced response.',
                    modules: [
                        'Advanced Scene Safety & Hazard Recognition',
                        'Basic Triage Principles for Mass Casualties',
                        'Managing Multiple Casualties',
                        'Advanced Bleeding Control (Tourniquets, Hemostatic Dressings)',
                        'Specific Injury Management: Head, Neck & Spinal Injuries',
                        'Specific Injury Management: Chest & Abdominal Injuries',
                        'Specific Injury Management: Environmental Emergencies (Hypothermia, Heatstroke)',
                        'Poisoning & Overdose Management',
                        'Advanced Airway Management Techniques',
                        'Use of Automated External Defibrillator (AED)',
                        'Patient Assessment & Monitoring',
                        'Long-term Care & Patient Handover'
                    ]
                },
                'patient-care-attendant': {
                    title: 'Patient Care Attendant Training',
                    description: 'This comprehensive training provides the necessary skills for compassionate and effective patient care. You will learn to assist patients with daily needs while adhering to ethical standards.',
                    modules: [
                        'Introduction to Patient Care Attendant Role',
                        'Basic Anatomy and Physiology for PCAs',
                        'Patient Hygiene (Bathing, Grooming, Oral Care)',
                        'Assistance with Mobility & Transfers',
                        'Monitoring Vital Signs (Temperature, Pulse, Respiration, BP)',
                        'Nutrition & Feeding Assistance',
                        'Infection Control & Prevention',
                        'Communication Skills for Patient Care',
                        'Ethical and Legal Considerations in Patient Support',
                        'Documentation and Reporting',
                        'Specialized Care for Elderly & Disabled Patients',
                        'Emergency Procedures for PCAs'
                    ]
                },
                'mental-health-first-aid': {
                    title: 'Mental Health First Aid',
                    description: 'Learn to recognize, understand, and respond to signs of mental illnesses and substance use disorders. This course teaches how to provide initial help and support to someone experiencing a mental health crisis or developing a mental health problem.',
                    modules: [
                        'Introduction to Mental Health First Aid',
                        'Understanding Mental Health & Mental Illness',
                        'Common Mental Health Disorders (Depression, Anxiety, Psychosis)',
                        'Recognizing Signs of Mental Distress',
                        'Action Plan for Mental Health Crises (ALGEE)',
                        'Suicide Risk & Non-Suicidal Self-Injury Crisis',
                        'Panic Attacks & Traumatic Events Crisis',
                        'Substance Use Disorders',
                        'Eating Disorders',
                        'Providing Initial Support & Resources',
                        'Connecting Individuals to Professional Help',
                        'Self-Care for the First Aider'
                    ]
                },
                'medical-coding-billing': {
                    title: 'Medical Coding and Billing (ICD-10, CPT)',
                    description: 'Master the essentials of medical coding and billing, crucial for healthcare administration. This course covers industry-standard coding systems, insurance processes, and compliance.',
                    modules: [
                        'Introduction to Medical Coding and Billing',
                        'Healthcare Documentation & Record Keeping',
                        'ICD-10-CM Coding Guidelines & Application',
                        'CPT (Current Procedural Terminology) Coding Guidelines & Application',
                        'HCPCS Level II Coding',
                        'Medical Terminology for Coders',
                        'Anatomy and Physiology for Coders',
                        'Insurance Claims & Reimbursement Process',
                        'Electronic Medical Records (EMR) Systems',
                        'HIPAA Compliance & Legal Aspects',
                        'Auditing & Compliance in Medical Coding',
                        'Practical Case Studies & Coding Exercises'
                    ]
                },
                'hygiene-sanitation': {
                    title: 'Hygiene & Sanitation Awareness',
                    description: 'This course emphasizes the critical importance of hygiene and sanitation for public health. You will learn practical methods to prevent the spread of diseases and maintain a healthy environment.',
                    modules: [
                        'Importance of Hygiene & Sanitation',
                        'Personal Hygiene Basics (Handwashing, Oral Hygiene, Body Care)',
                        'Food Hygiene & Safety Practices',
                        'Safe Drinking Water & Water Purification Methods',
                        'Waste Management & Disposal',
                        'Pest Control & Vector-borne Diseases',
                        'Environmental Sanitation & Cleanliness',
                        'Disease Transmission & Prevention',
                        'Community Hygiene & Public Health',
                        'Hygiene in Healthcare Settings (Basic Principles)',
                        'Role of Hygiene in Preventing Pandemics',
                        'Awareness Campaigns & Education'
                    ]
                },
                'nutrition-diet': {
                    title: 'Nutrition & Diet Planning Basics',
                    description: 'Gain foundational knowledge in nutrition science and learn to create balanced diet plans. This course is ideal for anyone looking to understand healthy eating principles for themselves or to advise others.',
                    modules: [
                        'Introduction to Nutrition Science',
                        'Macronutrients: Carbohydrates, Proteins, Fats',
                        'Micronutrients: Vitamins & Minerals',
                        'Understanding Food Labels & Nutritional Information',
                        'Daily Calorie Requirements & Energy Balance',
                        'Principles of a Balanced Diet',
                        'Dietary Guidelines & Food Pyramids',
                        'Nutrition Across Different Life Stages (Childhood, Pregnancy, Elderly)',
                        'Common Nutritional Deficiencies & Disorders',
                        'Weight Management Principles',
                        'Meal Planning & Preparation Basics',
                        'Role of Hydration & Fiber'
                    ]
                },
                'disaster-emergency': {
                    title: 'Disaster & Emergency Response Training',
                    description: 'Prepare yourself for various disaster scenarios and emergency situations. This training equips you with essential response techniques, communication strategies, and preparedness planning.',
                    modules: [
                        'Introduction to Disaster Management',
                        'Types of Disasters & Their Impacts',
                        'Emergency Preparedness & Planning',
                        'Evacuation Procedures & Shelter Management',
                        'Triage & Mass Casualty Incident Response',
                        'Emergency Communication & Information Dissemination',
                        'First Aid in Disaster Settings',
                        'Search & Rescue Basic Techniques',
                        'Psychological First Aid in Emergencies',
                        'Building an Emergency Kit',
                        'Community Resilience & Recovery',
                        'Role of Volunteers in Disaster Response'
                    ]
                },
                'dental-assistant': {
                    title: 'Dental Assistant Basic Training',
                    description: 'Get an introduction to the essential skills and knowledge required to assist dentists in a clinical setting. This course covers foundational aspects of dental terminology, patient care, and infection control.',
                    modules: [
                        'Introduction to Dental Assisting',
                        'Dental Terminology & Anatomy of the Oral Cavity',
                        'Dental Equipment & Instruments',
                        'Chairside Assisting Techniques',
                        'Patient Preparation & Post-Operative Instructions',
                        'Sterilization & Infection Control in Dentistry',
                        'Dental Materials & Their Uses',
                        'Basic Dental Charting',
                        'Radiography Principles (Basic)',
                        'Office Administration & Scheduling',
                        'Patient Education & Oral Hygiene Instructions',
                        'Professionalism & Ethics in Dentistry'
                    ]
                }
            };


            // Set current year in footer
            const currentYearSpan = document.getElementById('currentYear');
            if (currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            }

            // Firestore Collection Path (now directly to 'certificates' at root)
            const certificatesCollectionPath = 'certificates';

            // --- Helper to display verification results ---
            const displayVerificationResult = (type, data) => {
                verificationResultDiv.classList.remove('text-red-600', 'text-green-600', 'text-blue-600', 'border-red-300', 'border-green-300', 'border-blue-300');
                verificationResultDiv.classList.add('block'); // Ensure it's visible

                if (type === 'success') {
                    // Destructure directly accessible fields
                    const { name, course, id } = data;
                    // Use 'issuedate' from Firestore document and provide fallback
                    const issueDate = data.issuedate || 'N/A';

                    verificationResultDiv.innerHTML = `
                        <div class="space-y-2">
                            <p class="text-green-600 font-bold text-lg">Certificate Verified Successfully!</p>
                            <p><strong>Certificate ID:</strong> ${id}</p>
                            <p><strong>Student Name:</strong> ${name}</p>
                            <p><strong>Course:</strong> ${course}</p>
                            <p><strong>Issue Date:</strong> ${issueDate}</p>
                        </div>
                    `;
                    verificationResultDiv.classList.add('border-green-300');
                } else if (type === 'not-found') {
                    verificationResultDiv.innerHTML = `<p class="text-red-600 font-bold text-lg">${data}</p>`;
                    verificationResultDiv.classList.add('border-red-300');
                } else if (type === 'error') {
                    verificationResultDiv.innerHTML = `<p class="text-red-600 font-bold text-lg">Error: ${data}</p>`;
                    verificationResultDiv.classList.add('border-red-300');
                } else if (type === 'info') {
                    verificationResultDiv.innerHTML = `<p class="text-blue-600 font-bold text-lg">${data}</p>`;
                    verificationResultDiv.classList.add('border-blue-300');
                }
                verificationResultDiv.classList.remove('hidden'); // Ensure message is visible
            };


            // --- Certificate Verification Logic ---
            const handleVerifyCertificate = async () => {
                if (!db) {
                    displayVerificationResult('error', 'Database not initialized. Please try again.');
                    return;
                }

                const inputId = certificateIdInput.value.trim();

                if (!inputId) {
                    displayVerificationResult('info', 'Please enter a Certificate ID.');
                    return;
                }

                // Show loading state
                verifyBtn.disabled = true;
                verifyBtnText.classList.add('hidden');
                loadingSpinner.classList.remove('hidden');
                verifyIcon.classList.add('hidden'); // Hide default icon during loading
                verificationResultDiv.innerHTML = '<p class="text-gray-500">Searching...</p>';
                verificationResultDiv.classList.remove('border-red-300', 'border-green-300', 'border-blue-300'); // Clear previous colors


                try {
                    // Assuming certificates are stored directly under the 'certificates' collection
                    const certDocRef = doc(db, certificatesCollectionPath, inputId.toUpperCase());
                    const docSnap = await getDoc(certDocRef);

                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        displayVerificationResult('success', data);
                    } else {
                        displayVerificationResult('not-found', `Certificate ID "${inputId}" not found.`);
                    }
                } catch (error) {
                    console.error("Error verifying certificate:", error);
                    displayVerificationResult('error', `An error occurred during verification: ${error.message}`);
                } finally {
                    // Hide loading state
                    verifyBtn.disabled = false;
                    verifyBtnText.classList.remove('hidden');
                    verifyIcon.classList.remove('hidden'); // Re-show verify icon
                    loadingSpinner.classList.add('hidden');
                }
            };

            // --- Course Details Modal Logic ---
            const openCourseDetailsModal = (courseId) => {
                const course = coursesData[courseId];
                if (course) {
                    modalCourseTitle.textContent = course.title;
                    modalCourseDescription.textContent = course.description;
                    modalCourseModules.innerHTML = ''; // Clear previous modules
                    course.modules.forEach(moduleText => {
                        const li = document.createElement('li');
                        li.textContent = moduleText;
                        modalCourseModules.appendChild(li);
                    });
                    courseDetailsOverlay.classList.add('show');
                } else {
                    console.error('Course data not found for ID:', courseId);
                    // Optionally, display an error message to the user
                }
            };

            const closeCourseDetailsModal = () => {
                courseDetailsOverlay.classList.remove('show');
            };


            // Attach the handler to the verify button
            if (verifyBtn) {
                verifyBtn.addEventListener('click', handleVerifyCertificate);
            }

            // Attach handlers to "View Course Details" buttons
            document.querySelectorAll('.view-course-button').forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const courseId = this.dataset.courseId;
                    openCourseDetailsModal(courseId);
                });
            });

            // Attach handler to close modal button
            if (closeCourseModalBtn) {
                closeCourseModalBtn.addEventListener('click', closeCourseDetailsModal);
            }

            // --- Smooth Scrolling for Navigation ---
            document.querySelectorAll('.scroll-button').forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const sectionId = this.dataset.section;
                    const targetSection = document.getElementById(sectionId);
                    if (targetSection) {
                        targetSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        };
    </script>
</body>
</html>
